<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê°•ì œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .test { margin: 20px 0; padding: 15px; border: 1px solid #333; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .log { background: #f0f0f0; padding: 10px; margin: 10px 0; min-height: 100px; }
    </style>
</head>
<body>
    <h1>ğŸš€ ê°•ì œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë©”ì„œë“œ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test">
        <h2>í…ŒìŠ¤íŠ¸ 1: ëª¨ë“  ë¦¬ë‹¤ì´ë ‰íŠ¸ ë°©ë²• ì‹œë„</h2>
        <button onclick="testAllRedirectMethods()">ëª¨ë“  ë°©ë²• í…ŒìŠ¤íŠ¸</button>
        <div id="test1Log" class="log"></div>
    </div>

    <div class="test">
        <h2>í…ŒìŠ¤íŠ¸ 2: Meta íƒœê·¸ ë¦¬ë‹¤ì´ë ‰íŠ¸</h2>
        <button onclick="testMetaRedirect()">Meta íƒœê·¸ í…ŒìŠ¤íŠ¸</button>
        <div id="test2Log" class="log"></div>
    </div>

    <div class="test">
        <h2>í…ŒìŠ¤íŠ¸ 3: í¼ ì œì¶œ ë¦¬ë‹¤ì´ë ‰íŠ¸</h2>
        <button onclick="testFormRedirect()">Form ì œì¶œ í…ŒìŠ¤íŠ¸</button>
        <div id="test3Log" class="log"></div>
    </div>

    <div class="test">
        <h2>í…ŒìŠ¤íŠ¸ 4: ì•µì»¤ í´ë¦­ ë¦¬ë‹¤ì´ë ‰íŠ¸</h2>
        <button onclick="testAnchorRedirect()">ì•µì»¤ í´ë¦­ í…ŒìŠ¤íŠ¸</button>
        <div id="test4Log" class="log"></div>
    </div>

    <script>
        function log(testId, message) {
            const logDiv = document.getElementById(testId + 'Log');
            logDiv.innerHTML += `${new Date().toISOString()}: ${message}<br>`;
            console.log(message);
        }

        // 1. ëª¨ë“  JavaScript ë¦¬ë‹¤ì´ë ‰íŠ¸ ë°©ë²•
        function testAllRedirectMethods() {
            const methods = [
                {
                    name: 'window.location.href',
                    fn: () => window.location.href = 'index.html'
                },
                {
                    name: 'window.location.replace()',
                    fn: () => window.location.replace('index.html')
                },
                {
                    name: 'window.location.assign()',
                    fn: () => window.location.assign('index.html')
                },
                {
                    name: 'window.location = string',
                    fn: () => window.location = 'index.html'
                },
                {
                    name: 'window.location.pathname',
                    fn: () => {
                        const path = window.location.pathname;
                        const dir = path.substring(0, path.lastIndexOf('/'));
                        window.location.pathname = dir + '/index.html';
                    }
                },
                {
                    name: 'document.location.href',
                    fn: () => document.location.href = 'index.html'
                },
                {
                    name: 'window.open() same window',
                    fn: () => window.open('index.html', '_self')
                },
                {
                    name: 'history.pushState + reload',
                    fn: () => {
                        history.pushState({}, '', 'index.html');
                        location.reload();
                    }
                }
            ];

            methods.forEach((method, index) => {
                setTimeout(() => {
                    log('test1', `Testing: ${method.name}`);
                    try {
                        // ì‹¤ì œë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê³  ì‹œë®¬ë ˆì´ì…˜
                        const result = method.fn.toString();
                        log('test1', `âœ… ${method.name} would work`);
                    } catch (e) {
                        log('test1', `âŒ ${method.name} error: ${e.message}`);
                    }
                }, index * 100);
            });

            // ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì£¼ì„ í•´ì œí•˜ì—¬ ì‚¬ìš©)
            // setTimeout(() => {
            //     log('test1', 'ì‹¤ì œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤í–‰...');
            //     window.location.href = 'index.html';
            // }, methods.length * 100 + 500);
        }

        // 2. Meta íƒœê·¸ ë¦¬ë‹¤ì´ë ‰íŠ¸
        function testMetaRedirect() {
            log('test2', 'Creating meta refresh tag...');
            
            const meta = document.createElement('meta');
            meta.httpEquiv = 'refresh';
            meta.content = '3; url=index.html';
            document.head.appendChild(meta);
            
            log('test2', 'Meta tag added - will redirect in 3 seconds');
            
            let countdown = 3;
            const timer = setInterval(() => {
                log('test2', `Redirecting in ${countdown}...`);
                countdown--;
                if (countdown <= 0) {
                    clearInterval(timer);
                    // ì‹¤ì œë¡œëŠ” meta íƒœê·¸ê°€ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬
                    document.head.removeChild(meta);
                    log('test2', 'Meta tag removed (ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸ë¨)');
                }
            }, 1000);
        }

        // 3. í¼ ì œì¶œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        function testFormRedirect() {
            log('test3', 'Creating hidden form...');
            
            const form = document.createElement('form');
            form.method = 'GET';
            form.action = 'index.html';
            form.style.display = 'none';
            
            document.body.appendChild(form);
            log('test3', 'Form created and added to body');
            
            // ì‹¤ì œ ì œì¶œ (ì£¼ì„ í•´ì œí•˜ì—¬ ì‚¬ìš©)
            // log('test3', 'Submitting form...');
            // form.submit();
            
            // ì‹œë®¬ë ˆì´ì…˜
            log('test3', 'Form would submit to: ' + form.action);
            document.body.removeChild(form);
        }

        // 4. ì•µì»¤ í´ë¦­ ë¦¬ë‹¤ì´ë ‰íŠ¸
        function testAnchorRedirect() {
            log('test4', 'Creating hidden anchor...');
            
            const anchor = document.createElement('a');
            anchor.href = 'index.html';
            anchor.style.display = 'none';
            anchor.id = 'hiddenRedirect';
            
            document.body.appendChild(anchor);
            log('test4', 'Anchor created: ' + anchor.href);
            
            // í”„ë¡œê·¸ë˜ë°ì  í´ë¦­
            log('test4', 'Triggering click event...');
            anchor.click();
            
            // MouseEventë¡œ ì‹œë„
            log('test4', 'Triggering MouseEvent...');
            const event = new MouseEvent('click', {
                view: window,
                bubbles: true,
                cancelable: true
            });
            anchor.dispatchEvent(event);
            
            log('test4', 'Click events dispatched');
            document.body.removeChild(anchor);
        }

        // ìµœì¢… í•´ê²°ì±…: ê°•ì œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•¨ìˆ˜
        window.forceRedirect = function(url) {
            console.log('ğŸš¨ Force redirect to:', url);
            
            // ë°©ë²• 1: ê¸°ë³¸
            try {
                window.location.href = url;
                return;
            } catch (e) {
                console.error('Method 1 failed:', e);
            }
            
            // ë°©ë²• 2: replace
            try {
                window.location.replace(url);
                return;
            } catch (e) {
                console.error('Method 2 failed:', e);
            }
            
            // ë°©ë²• 3: assign
            try {
                window.location.assign(url);
                return;
            } catch (e) {
                console.error('Method 3 failed:', e);
            }
            
            // ë°©ë²• 4: meta refresh
            try {
                const meta = document.createElement('meta');
                meta.httpEquiv = 'refresh';
                meta.content = '0; url=' + url;
                document.head.appendChild(meta);
                return;
            } catch (e) {
                console.error('Method 4 failed:', e);
            }
            
            // ë°©ë²• 5: form submit
            try {
                const form = document.createElement('form');
                form.method = 'GET';
                form.action = url;
                document.body.appendChild(form);
                form.submit();
                return;
            } catch (e) {
                console.error('Method 5 failed:', e);
            }
            
            // ëª¨ë“  ë°©ë²• ì‹¤íŒ¨
            console.error('âŒ All redirect methods failed!');
            alert('ë¦¬ë‹¤ì´ë ‰íŠ¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ì´ë™í•´ì£¼ì„¸ìš”: ' + url);
        };
    </script>
</body>
</html>