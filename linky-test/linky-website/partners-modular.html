<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RYYX6LYN2B"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RYYX6LYN2B');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linky íŒŒíŠ¸ë„ˆ - ììœ ë¡œìš´ ì‹œê°„ì— ìˆ˜ìµ ì°½ì¶œ</title>
    
        <!-- Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    
    
    <!-- Supabase ì„¤ì • -->
    <script src="supabase-config.js"></script>
    
    <!-- ê³µí†µ ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/components.css">
    
    <!-- í˜ì´ì§€ë³„ ìŠ¤íƒ€ì¼ -->
    <style>
        /* íˆì–´ë¡œ ì„¹ì…˜ */
        .hero-section {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            padding: 100px 0;
            text-align: center;
        }

        .hero-title {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
            animation: fadeIn 0.8s ease-out;
        }

        .hero-subtitle {
            font-size: 24px;
            margin-bottom: 40px;
            opacity: 0.9;
            animation: fadeIn 0.8s ease-out 0.2s backwards;
        }

        /* ìˆ˜ìµ ê³„ì‚°ê¸° */
        .calculator-container {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: -60px auto 60px;
            position: relative;
            z-index: 10;
        }

        .calculator-input {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .calculator-slider {
            flex: 1;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }

        .calculator-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: #22c55e;
            border-radius: 50%;
            cursor: pointer;
        }

        .calculator-result {
            text-align: center;
            padding: 30px;
            background: #f0fdf4;
            border-radius: 8px;
            margin-top: 20px;
        }

        .result-amount {
            font-size: 48px;
            font-weight: bold;
            color: #22c55e;
            margin-bottom: 10px;
        }

        /* í˜œíƒ ì„¹ì…˜ */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .benefit-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            text-align: center;
            transition: transform 0.3s;
        }

        .benefit-card:hover {
            transform: translateY(-5px);
        }

        .benefit-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        /* FAQ ì„¹ì…˜ */
        .faq-item {
            background: white;
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .faq-question {
            padding: 20px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
        }

        .faq-question:hover {
            background: #f8fafc;
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s, padding 0.3s;
        }

        .faq-item.active .faq-answer {
            padding: 20px;
            max-height: 500px;
        }

        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }

        /* í›„ê¸° ì„¹ì…˜ */
        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .review-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .review-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .review-avatar {
            width: 50px;
            height: 50px;
            background: #22c55e;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }

        .review-rating {
            color: #fbbf24;
            margin-bottom: 10px;
        }

        /* íŒŒíŠ¸ë„ˆ ëŒ€ì‹œë³´ë“œ */
        .partner-dashboard {
            padding: 40px 0;
        }

        .earnings-card {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 30px;
        }

        .earnings-amount {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .job-list {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .job-item {
            padding: 20px;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .job-item:hover {
            background: #f8fafc;
        }

        .job-item:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 36px;
            }
            
            .hero-subtitle {
                font-size: 18px;
            }
            
            .calculator-container {
                padding: 30px 20px;
                margin: -40px 20px 40px;
            }
            
            .reviews-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- í—¤ë” ì»´í¬ë„ŒíŠ¸ -->
    <div id="header-root"></div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main id="mainContent">
        <!-- ê²ŒìŠ¤íŠ¸ ë·° (ë¡œê·¸ì¸ ì „) -->
        <div id="guestView">
            <!-- íˆì–´ë¡œ ì„¹ì…˜ -->
            <section class="hero-section">
                <div class="section-container">
                    <h1 class="hero-title">ì›í•˜ëŠ” ì‹œê°„ì—, ì›í•˜ëŠ” ë§Œí¼</h1>
                    <p class="hero-subtitle">í‰ê·  ì‹œê¸‰ 3ë§Œì›ì˜ ìƒˆë¡œìš´ ë¶€ìˆ˜ì… ê¸°íšŒ</p>
                    <button class="btn" style="background: white; color: #22c55e; font-size: 18px; padding: 15px 30px;" onclick="authModal.openSignupSelect()">
                        íŒŒíŠ¸ë„ˆ ì§€ì›í•˜ê¸°
                    </button>
                </div>
            </section>

            <!-- ìˆ˜ìµ ê³„ì‚°ê¸° -->
            <section>
                <div class="calculator-container">
                    <h3 style="text-align: center; margin-bottom: 30px; color: #1f2937;">
                        ì˜ˆìƒ ìˆ˜ìµ ê³„ì‚°í•˜ê¸°
                    </h3>
                    <div>
                        <label style="display: block; margin-bottom: 15px; color: #4b5563;">
                            ì¼ì£¼ì¼ì— ëª‡ ë²ˆ ì •ë„ í™œë™í•˜ì‹¤ ì˜ˆì •ì¸ê°€ìš”?
                        </label>
                        <div class="calculator-input">
                            <input type="range" class="calculator-slider" id="weeklyCount" 
                                   min="1" max="20" value="8" oninput="calculateEarnings()">
                            <span id="weeklyCountDisplay" style="font-size: 24px; font-weight: bold; color: #22c55e; min-width: 60px;">
                                8íšŒ
                            </span>
                        </div>
                    </div>
                    <div class="calculator-result">
                        <div class="result-amount" id="monthlyEarnings">480,000ì›</div>
                        <div style="color: #6b7280;">ì˜ˆìƒ ì›” ìˆ˜ìµ</div>
                        <div style="margin-top: 10px; font-size: 14px; color: #9ca3af;">
                            * ê±´ë‹¹ í‰ê·  15,000ì›, ì£¼ë‹¹ <span id="weeklyCountText">8</span>íšŒ ê¸°ì¤€
                        </div>
                    </div>
                </div>
            </section>

            <!-- í˜œíƒ ì„¹ì…˜ -->
            <section id="benefits" class="section">
                <div class="section-container">
                    <div class="section-header">
                        <h2 class="section-title">íŒŒíŠ¸ë„ˆ í˜œíƒ</h2>
                        <p class="section-subtitle">Linky íŒŒíŠ¸ë„ˆê°€ ë˜ë©´ ì´ëŸ° ì ì´ ì¢‹ì•„ìš”</p>
                    </div>
                    
                    <div class="benefits-grid">
                        <div class="benefit-card">
                            <div class="benefit-icon">ğŸ’°</div>
                            <h3>ë†’ì€ ìˆ˜ìµ</h3>
                            <p>í‰ê·  25ë¶„ ì‘ì—…ìœ¼ë¡œ 12,000ì› ì´ìƒ ìˆ˜ìµ (ì‹œê¸‰ 3ë§Œì› ìˆ˜ì¤€)</p>
                        </div>
                        <div class="benefit-card">
                            <div class="benefit-icon">ğŸ•</div>
                            <h3>ììœ ë¡œìš´ ì‹œê°„</h3>
                            <p>ì›í•˜ëŠ” ì‹œê°„, ì›í•˜ëŠ” ì§€ì—­ì—ì„œë§Œ ììœ ë¡­ê²Œ í™œë™</p>
                        </div>
                        <div class="benefit-card">
                            <div class="benefit-icon">ğŸ¯</div>
                            <h3>ê°„ë‹¨í•œ ì‘ì—…</h3>
                            <p>ì „ë¬¸ ì²­ì†Œê°€ ì•„ë‹Œ ê°„ë‹¨í•œ ì •ë¦¬ ì‘ì—… (í‰ê·  10-25ë¶„)</p>
                        </div>
                        <div class="benefit-card">
                            <div class="benefit-icon">ğŸš€</div>
                            <h3>ì¦‰ì‹œ ì‹œì‘</h3>
                            <p>ë³µì¡í•œ ë©´ì ‘ ì—†ì´ ê°„ë‹¨í•œ ì¸ì¦ í›„ ë°”ë¡œ ì‹œì‘</p>
                        </div>
                        <div class="benefit-card">
                            <div class="benefit-icon">ğŸ“±</div>
                            <h3>ìŠ¤ë§ˆíŠ¸í•œ ê´€ë¦¬</h3>
                            <p>ëª¨ë°”ì¼ë¡œ ëª¨ë“  ê²ƒì„ ê°„í¸í•˜ê²Œ ì²˜ë¦¬</p>
                        </div>
                        <div class="benefit-card">
                            <div class="benefit-icon">ğŸ†</div>
                            <h3>ì„±ê³¼ ë³´ìƒ</h3>
                            <p>ìš°ìˆ˜ íŒŒíŠ¸ë„ˆ ì¶”ê°€ ì¸ì„¼í‹°ë¸Œ ë° í˜œíƒ ì œê³µ</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- FAQ ì„¹ì…˜ -->
            <section id="faq" class="section" style="background: #f8fafc;">
                <div class="section-container">
                    <div class="section-header">
                        <h2 class="section-title">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h2>
                        <p class="section-subtitle">íŒŒíŠ¸ë„ˆë‹˜ë“¤ì´ ê¶ê¸ˆí•´í•˜ì‹œëŠ” ë‚´ìš©ë“¤</p>
                    </div>
                    
                    <div style="max-width: 800px; margin: 0 auto;">
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>ì–´ë–¤ ì‘ì—…ì„ í•˜ê²Œ ë˜ë‚˜ìš”?</span>
                                <span class="faq-icon">â–¼</span>
                            </div>
                            <div class="faq-answer">
                                <p>ì£¼ë¡œ ìŠ¤í„°ë””ì¹´í˜, íŒŒí‹°ë£¸ ë“±ì˜ ê°„ë‹¨í•œ ì •ë¦¬ ì‘ì—…ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. 
                                í…Œì´ë¸” ì •ë¦¬, ì˜ì ë°°ì¹˜, ì“°ë ˆê¸° ìˆ˜ê±°, ì†Œëª¨í’ˆ ë³´ì¶© ë“± 
                                10-25ë¶„ ë‚´ì— ëë‚˜ëŠ” ê°„ë‹¨í•œ ì‘ì—…ë“¤ì…ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>ìˆ˜ìµì€ ì–¸ì œ ì •ì‚°ë˜ë‚˜ìš”?</span>
                                <span class="faq-icon">â–¼</span>
                            </div>
                            <div class="faq-answer">
                                <p>ì‘ì—… ì™„ë£Œ í›„ ê³ ê° í™•ì¸ì´ ëë‚˜ë©´ ì¦‰ì‹œ ì •ì‚° ê°€ëŠ¥í•©ë‹ˆë‹¤. 
                                ì£¼ ë‹¨ìœ„ë¡œ ì¼ê´„ ì •ì‚°í•˜ê±°ë‚˜, ì›í•˜ì‹¤ ë•Œ ì–¸ì œë“  ì¶œê¸ˆ ì‹ ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>íŠ¹ë³„í•œ ìê²©ì´ í•„ìš”í•œê°€ìš”?</span>
                                <span class="faq-icon">â–¼</span>
                            </div>
                            <div class="faq-answer">
                                <p>íŠ¹ë³„í•œ ìê²©ì€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 
                                ë§Œ 18ì„¸ ì´ìƒì´ë©´ ëˆ„êµ¬ë‚˜ ì§€ì› ê°€ëŠ¥í•˜ë©°, 
                                ê°„ë‹¨í•œ ì˜¨ë¼ì¸ êµìœ¡ í›„ ë°”ë¡œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                <span>ì¥ë¹„ë‚˜ ë„êµ¬ë¥¼ ì¤€ë¹„í•´ì•¼ í•˜ë‚˜ìš”?</span>
                                <span class="faq-icon">â–¼</span>
                            </div>
                            <div class="faq-answer">
                                <p>ê¸°ë³¸ì ì¸ ì²­ì†Œ ë„êµ¬ëŠ” ê³µê°„ì— êµ¬ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 
                                íŒŒíŠ¸ë„ˆë‹˜ì€ ìŠ¤ë§ˆíŠ¸í°ë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤. 
                                í•„ìš”ì‹œ ê°„ë‹¨í•œ ì²­ì†Œ ë„êµ¬ë¥¼ ì§€ê¸‰í•´ë“œë¦½ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- í›„ê¸° ì„¹ì…˜ -->
            <section id="reviews" class="section">
                <div class="section-container">
                    <div class="section-header">
                        <h2 class="section-title">íŒŒíŠ¸ë„ˆ í›„ê¸°</h2>
                        <p class="section-subtitle">ì‹¤ì œ íŒŒíŠ¸ë„ˆë‹˜ë“¤ì˜ ìƒìƒí•œ ì´ì•¼ê¸°</p>
                    </div>
                    
                    <div class="reviews-grid">
                        <div class="review-card">
                            <div class="review-header">
                                <div class="review-avatar">ê¹€OO</div>
                                <div>
                                    <div class="review-rating">â­â­â­â­â­</div>
                                    <div style="color: #6b7280;">ê°•ë‚¨êµ¬ í™œë™ 6ê°œì›”</div>
                                </div>
                            </div>
                            <p style="line-height: 1.6;">
                                "í‡´ê·¼ í›„ ì‹œê°„ì„ í™œìš©í•´ì„œ ì›” 100ë§Œì› ì •ë„ ì¶”ê°€ ìˆ˜ìµì„ ì–»ê³  ìˆì–´ìš”. 
                                ì‘ì—…ë„ ê°„ë‹¨í•˜ê³ , ì›í•˜ëŠ” ì‹œê°„ì—ë§Œ í•  ìˆ˜ ìˆì–´ì„œ ì •ë§ ë§Œì¡±í•©ë‹ˆë‹¤."
                            </p>
                        </div>
                        
                        <div class="review-card">
                            <div class="review-header">
                                <div class="review-avatar">ë°•OO</div>
                                <div>
                                    <div class="review-rating">â­â­â­â­â­</div>
                                    <div style="color: #6b7280;">ì„œì´ˆêµ¬ í™œë™ 3ê°œì›”</div>
                                </div>
                            </div>
                            <p style="line-height: 1.6;">
                                "ëŒ€í•™ìƒì¸ë° ê³µê°• ì‹œê°„ì„ í™œìš©í•˜ê¸° ì¢‹ì•„ìš”. 
                                í•œ ë²ˆì— 15,000ì› ì •ë„ ë²Œ ìˆ˜ ìˆê³ , ì¼ë„ ì–´ë µì§€ ì•Šì•„ì„œ ì¶”ì²œí•´ìš”!"
                            </p>
                        </div>
                        
                        <div class="review-card">
                            <div class="review-header">
                                <div class="review-avatar">ì´OO</div>
                                <div>
                                    <div class="review-rating">â­â­â­â­â­</div>
                                    <div style="color: #6b7280;">ì†¡íŒŒêµ¬ í™œë™ 1ë…„</div>
                                </div>
                            </div>
                            <p style="line-height: 1.6;">
                                "ì£¼ë¶€ì¸ë° ì•„ì´ í•™êµ ë³´ë‚¸ í›„ ì˜¤ì „ ì‹œê°„ì„ í™œìš©í•˜ê³  ìˆì–´ìš”. 
                                ì‹œê°„ë„ ììœ ë¡­ê³  ìˆ˜ìµë„ ê´œì°®ì•„ì„œ ì •ë§ ì¢‹ìŠµë‹ˆë‹¤."
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA ì„¹ì…˜ -->
            <section class="section" style="background: #f0fdf4;">
                <div class="section-container text-center">
                    <h2 class="section-title">ì§€ê¸ˆ ì‹œì‘í•˜ì„¸ìš”</h2>
                    <p class="section-subtitle" style="margin-bottom: 30px;">
                        3ë¶„ ë§Œì— ì§€ì›í•˜ê³ , ë‚´ì¼ë¶€í„° ìˆ˜ìµ ì°½ì¶œ
                    </p>
                    <button class="btn btn-primary" style="font-size: 20px; padding: 15px 40px;" onclick="authModal.openSignupSelect()">
                        íŒŒíŠ¸ë„ˆ ì§€ì›í•˜ê¸°
                    </button>
                </div>
            </section>
        </div>

        <!-- íŒŒíŠ¸ë„ˆ ëŒ€ì‹œë³´ë“œ (ë¡œê·¸ì¸ í›„) -->
        <div id="partnerDashboard" style="display: none;">
            <!-- ëŒ€ì‹œë³´ë“œ ë‚´ìš©ì€ JavaScriptë¡œ ë™ì  ìƒì„± -->
        </div>
    </main>

    <!-- í‘¸í„° ì»´í¬ë„ŒíŠ¸ -->
    <div id="footer-root"></div>

    <!-- ì¸ì¦ ëª¨ë‹¬ -->
    <script src="auth-modal.js"></script>
    
    <!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="js/utils.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/auth-utils.js"></script>
    <script src="components/header.js"></script>
    <script src="components/footer.js"></script>
    
    <!-- í˜ì´ì§€ë³„ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        let currentUser = null;
        let availableJobs = [];
        let myJobs = [];

        // í˜ì´ì§€ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // í—¤ë” ì»´í¬ë„ŒíŠ¸ ì´ˆê¸°í™”
            window.headerComponent = new HeaderComponent({
                showPartnerMenu: true,
                currentPage: 'partner'
            });
            
            // í‘¸í„° ì»´í¬ë„ŒíŠ¸ ì´ˆê¸°í™”
            new FooterComponent();
            
            // ì¸ì¦ ìƒíƒœ í™•ì¸
            checkAuthStatus().then(({ isAuthenticated, user }) => {
                if (isAuthenticated && user && user.type === 'partner') {
                    currentUser = user;
                    showPartnerDashboard();
                } else {
                    showGuestView();
                }
            });
        });

        // ìˆ˜ìµ ê³„ì‚°ê¸°
        function calculateEarnings() {
            const weeklyCount = document.getElementById('weeklyCount').value;
            const monthlyEarnings = weeklyCount * 4 * 15000;
            
            document.getElementById('weeklyCountDisplay').textContent = weeklyCount + 'íšŒ';
            document.getElementById('weeklyCountText').textContent = weeklyCount;
            document.getElementById('monthlyEarnings').textContent = monthlyEarnings.toLocaleString() + 'ì›';
        }

        // FAQ í† ê¸€
        function toggleFaq(element) {
            const faqItem = element.parentElement;
            faqItem.classList.toggle('active');
        }

        // ê²ŒìŠ¤íŠ¸ ë·° í‘œì‹œ
        function showGuestView() {
            document.getElementById('guestView').style.display = 'block';
            document.getElementById('partnerDashboard').style.display = 'none';
        }

        // íŒŒíŠ¸ë„ˆ ëŒ€ì‹œë³´ë“œ í‘œì‹œ
        async function showPartnerDashboard() {
            document.getElementById('guestView').style.display = 'none';
            document.getElementById('partnerDashboard').style.display = 'block';
            
            // ë°ì´í„° ë¡œë“œ
            await loadPartnerData();
            
            // ëŒ€ì‹œë³´ë“œ ë Œë”ë§
            renderPartnerDashboard();
        }

        // íŒŒíŠ¸ë„ˆ ë°ì´í„° ë¡œë“œ
        async function loadPartnerData() {
            try {
                // ì´ìš© ê°€ëŠ¥í•œ ì‘ì—… ë¡œë“œ
                const availableSnapshot = await db.collection('jobs')
                    .where('status', '==', 'pending')
                    .orderBy('createdAt', 'desc')
                    .limit(10)
                    .get();
                
                availableJobs = [];
                availableSnapshot.forEach(doc => {
                    availableJobs.push({ id: doc.id, ...doc.data() });
                });
                
                // ë‚´ ì‘ì—… ë¡œë“œ
                const mySnapshot = await db.collection('jobs')
                    .where('partnerId', '==', currentUser.uid)
                    .orderBy('createdAt', 'desc')
                    .limit(10)
                    .get();
                
                myJobs = [];
                mySnapshot.forEach(doc => {
                    myJobs.push({ id: doc.id, ...doc.data() });
                });
            } catch (error) {
                console.error('íŒŒíŠ¸ë„ˆ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // íŒŒíŠ¸ë„ˆ ëŒ€ì‹œë³´ë“œ ë Œë”ë§
        function renderPartnerDashboard() {
            const dashboard = document.getElementById('partnerDashboard');
            
            // ì´ë²ˆ ë‹¬ ìˆ˜ìµ ê³„ì‚°
            const thisMonthEarnings = myJobs
                .filter(job => job.status === 'completed')
                .reduce((sum, job) => sum + (job.pricing?.partnerEarnings || 0), 0);
            
            dashboard.innerHTML = `
                <section class="partner-dashboard">
                    <div class="section-container">
                        <h1 style="font-size: 32px; font-weight: bold; color: #1f2937; margin-bottom: 30px; text-align: center;">
                            ì•ˆë…•í•˜ì„¸ìš”, ${currentUser.name || 'íŒŒíŠ¸ë„ˆ'}ë‹˜! ğŸ‘‹
                        </h1>
                        
                        <!-- ìˆ˜ìµ ì¹´ë“œ -->
                        <div class="earnings-card">
                            <div style="font-size: 16px; opacity: 0.9; margin-bottom: 5px;">ì´ë²ˆ ë‹¬ ìˆ˜ìµ</div>
                            <div class="earnings-amount">${thisMonthEarnings.toLocaleString()}ì›</div>
                            <div style="font-size: 14px; opacity: 0.8;">
                                ì™„ë£Œëœ ì‘ì—…: ${myJobs.filter(job => job.status === 'completed').length}ê±´
                            </div>
                        </div>
                        
                        <!-- ì´ìš© ê°€ëŠ¥í•œ ì‘ì—… -->
                        <div style="margin-bottom: 40px;">
                            <h2 style="font-size: 24px; font-weight: bold; color: #1f2937; margin-bottom: 20px;">
                                ì´ìš© ê°€ëŠ¥í•œ ì‘ì—…
                            </h2>
                            ${renderAvailableJobs()}
                        </div>
                        
                        <!-- ë‚´ ì‘ì—… -->
                        <div>
                            <h2 style="font-size: 24px; font-weight: bold; color: #1f2937; margin-bottom: 20px;">
                                ë‚´ ì‘ì—…
                            </h2>
                            ${renderMyJobs()}
                        </div>
                    </div>
                </section>
            `;
        }

        // ì´ìš© ê°€ëŠ¥í•œ ì‘ì—… ë Œë”ë§
        function renderAvailableJobs() {
            if (availableJobs.length === 0) {
                return `
                    <div style="text-align: center; padding: 40px; background: #f8fafc; border-radius: 12px;">
                        <p style="color: #6b7280;">í˜„ì¬ ì´ìš© ê°€ëŠ¥í•œ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
            }

            return `
                <div class="job-list">
                    ${availableJobs.map(job => `
                        <div class="job-item" onclick="acceptJob('${job.id}')">
                            <div>
                                <div style="font-weight: 600; color: #1f2937; margin-bottom: 4px;">
                                    ${job.spaceInfo?.name || 'ê³µê°„ ì •ë³´ ì—†ìŒ'}
                                </div>
                                <div style="font-size: 14px; color: #6b7280;">
                                    ${job.schedule?.requestedDate} ${job.schedule?.requestedTime} Â· 
                                    ${job.spaceInfo?.address?.sigungu || 'ìœ„ì¹˜ ì •ë³´ ì—†ìŒ'}
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 18px; font-weight: bold; color: #22c55e;">
                                    ${(job.pricing?.partnerEarnings || 0).toLocaleString()}ì›
                                </div>
                                <button class="btn btn-small btn-primary" style="margin-top: 5px;">
                                    ìˆ˜ë½í•˜ê¸°
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ë‚´ ì‘ì—… ë Œë”ë§
        function renderMyJobs() {
            if (myJobs.length === 0) {
                return `
                    <div style="text-align: center; padding: 40px; background: #f8fafc; border-radius: 12px;">
                        <p style="color: #6b7280;">ì•„ì§ ìˆ˜ë½í•œ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
            }

            return `
                <div class="job-list">
                    ${myJobs.map(job => {
                        const statusConfig = getStatusConfig(job.status);
                        return `
                            <div class="job-item">
                                <div>
                                    <div style="font-weight: 600; color: #1f2937; margin-bottom: 4px;">
                                        ${job.spaceInfo?.name || 'ê³µê°„ ì •ë³´ ì—†ìŒ'}
                                    </div>
                                    <div style="font-size: 14px; color: #6b7280;">
                                        ${job.schedule?.requestedDate} ${job.schedule?.requestedTime}
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <span style="background: ${statusConfig.bg}; color: ${statusConfig.color}; padding: 4px 12px; border-radius: 12px; font-size: 14px; font-weight: 600;">
                                        ${statusConfig.text}
                                    </span>
                                    <div style="margin-top: 5px; font-weight: bold; color: #22c55e;">
                                        ${(job.pricing?.partnerEarnings || 0).toLocaleString()}ì›
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        // ìƒíƒœ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
        function getStatusConfig(status) {
            const configs = {
                matched: { text: 'ë§¤ì¹­ë¨', color: '#1e40af', bg: '#dbeafe' },
                in_progress: { text: 'ì§„í–‰ ì¤‘', color: '#3730a3', bg: '#e0e7ff' },
                completed: { text: 'ì™„ë£Œ', color: '#065f46', bg: '#d1fae5' },
                cancelled: { text: 'ì·¨ì†Œ', color: '#991b1b', bg: '#fee2e2' }
            };
            return configs[status] || { text: status, color: '#6b7280', bg: '#f3f4f6' };
        }

        // ì‘ì—… ìˆ˜ë½
        async function acceptJob(jobId) {
            if (!confirm('ì´ ì‘ì—…ì„ ìˆ˜ë½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                await db.collection('jobs').doc(jobId).update({
                    partnerId: currentUser.uid,
                    status: 'matched',
                    'matching.acceptedAt': new Date().toISOString()
                });
                
                alert('ì‘ì—…ì´ ìˆ˜ë½ë˜ì—ˆìŠµë‹ˆë‹¤!');
                await loadPartnerData();
                renderPartnerDashboard();
            } catch (error) {
                console.error('ì‘ì—… ìˆ˜ë½ ì˜¤ë¥˜:', error);
                alert('ì‘ì—… ìˆ˜ë½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
    </script>
</body>
</html>