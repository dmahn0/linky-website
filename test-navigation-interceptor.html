<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Navigation Interceptor</title>
    <script>
        // Navigation ì¸í„°ì…‰í„° ì„¤ì¹˜
        (function() {
            console.log('ğŸ” Navigation Interceptor í™œì„±í™”');
            
            // ì›ë³¸ ë©”ì„œë“œ ì €ì¥
            const originalHref = Object.getOwnPropertyDescriptor(window.location, 'href');
            const originalReplace = window.location.replace;
            const originalAssign = window.location.assign;
            
            // href setter ì¸í„°ì…‰íŠ¸
            Object.defineProperty(window.location, 'href', {
                get: function() {
                    return originalHref.get.call(this);
                },
                set: function(value) {
                    console.group('ğŸš€ Navigation Attempt (href setter)');
                    console.log('Target:', value);
                    console.log('Current:', window.location.href);
                    console.log('Resolved:', new URL(value, window.location.href).href);
                    console.trace('Call Stack');
                    console.groupEnd();
                    
                    // ì‹¤ì œ ë„¤ë¹„ê²Œì´ì…˜ ì°¨ë‹¨ (í…ŒìŠ¤íŠ¸ìš©)
                    const shouldNavigate = confirm(`Navigate to: ${value}?`);
                    if (shouldNavigate) {
                        return originalHref.set.call(this, value);
                    }
                }
            });
            
            // replace ë©”ì„œë“œ ì¸í„°ì…‰íŠ¸
            window.location.replace = function(url) {
                console.group('ğŸ”„ Navigation Attempt (replace)');
                console.log('Target:', url);
                console.log('Current:', window.location.href);
                console.log('Resolved:', new URL(url, window.location.href).href);
                console.trace('Call Stack');
                console.groupEnd();
                
                const shouldNavigate = confirm(`Replace to: ${url}?`);
                if (shouldNavigate) {
                    return originalReplace.call(this, url);
                }
            };
            
            // assign ë©”ì„œë“œ ì¸í„°ì…‰íŠ¸
            window.location.assign = function(url) {
                console.group('ğŸ“ Navigation Attempt (assign)');
                console.log('Target:', url);
                console.log('Current:', window.location.href);
                console.log('Resolved:', new URL(url, window.location.href).href);
                console.trace('Call Stack');
                console.groupEnd();
                
                const shouldNavigate = confirm(`Assign to: ${url}?`);
                if (shouldNavigate) {
                    return originalAssign.call(this, url);
                }
            };
            
            console.log('âœ… Interceptor ì„¤ì¹˜ ì™„ë£Œ');
        })();
    </script>
</head>
<body>
    <h1>Navigation Interceptor Active</h1>
    <p>ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ íŒŒíŠ¸ë„ˆ ëŒ€ì‹œë³´ë“œì— ì£¼ì…í•˜ì—¬ ì‹¤ì œ ë„¤ë¹„ê²Œì´ì…˜ ì‹œë„ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.</p>
    
    <h2>ì‚¬ìš© ë°©ë²•:</h2>
    <ol>
        <li>ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì—´ê¸° (F12)</li>
        <li>Console íƒ­ìœ¼ë¡œ ì´ë™</li>
        <li>ìœ„ì˜ ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬</li>
        <li>íŒŒíŠ¸ë„ˆ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ì—ì„œ ë¶™ì—¬ë„£ê¸° ì‹¤í–‰</li>
        <li>ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í´ë¦­</li>
        <li>Consoleì—ì„œ ë„¤ë¹„ê²Œì´ì…˜ ì‹œë„ í™•ì¸</li>
    </ol>
    
    <h2>í…ŒìŠ¤íŠ¸ ë²„íŠ¼:</h2>
    <button onclick="window.location.href = 'index.html'">href = 'index.html'</button>
    <button onclick="window.location.href = './index.html'">href = './index.html'</button>
    <button onclick="window.location.replace('index.html')">replace('index.html')</button>
    <button onclick="window.location.replace('./index.html')">replace('./index.html')</button>
</body>
</html>